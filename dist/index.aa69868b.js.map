{"mappings":"AAAC;AAED,IAAI,cAAc,SAAS,cAAc,CAAC;AAE1C,IAAI,oBAAoB,SAAS,cAAc,CAAC;AAEhD,YAAY,gBAAgB,CAAC,SAAS;AAEtC,8DAA8D;AAC9D,SAAS;IACL,kBAAkB,SAAS,GAAG,IAAI,wCAAwC;IAE1E,IAAI,iBAAiB,SAAS,cAAc,CAAC,aAAa,KAAK;IAE/D,IAAI,UAAU,CAAC,uFAAuF,EAAE,eAAe,SAAS,CAAC;IAEjI,UAAU;AACd;AAEA,iFAAiF;AACjF,eAAe,UAAU,OAAO;IAC5B,IAAI;QACA,IAAI,WAAW,MAAM,MAAM;QAE3B,IAAI,WAAW,MAAM,SAAS,IAAI;QAElC,IAAI,YAAY,SAAS,KAAK;QAE9B,UAAU,OAAO,CAAC,CAAA;YACd,IAAI,SAAS,IAAI,CAAC,EAAE,CAAC,EAAE;YAEvB,YAAY;QAChB;IAEJ,EAAE,OAAM;QACJ,QAAQ,GAAG,CAAC;IAChB;AACJ;AAEA,yDAAyD;AACzD,eAAe,YAAY,MAAM;IAC7B,IAAI,UAAU,CAAC,2BAA2B,EAAE,OAAO,yCAAyC,CAAC;IAE7F,IAAI;QACA,IAAI,WAAW,MAAM,MAAM;QAE3B,IAAI,kBAAkB,MAAM,SAAS,IAAI;QAEzC,IAAI,OAAO,gBAAgB,WAAW,CAAC,eAAe;QAEtD,IAAI,YAAY,MAAM,MAAM,CAAC,8BAA8B,EAAE,KAAK,aAAa,CAAC;QAEhF,IAAI,aAAa,MAAM,UAAU,IAAI;QAErC,IAAI,SAAS,WAAW,OAAO,CAAC,OAAO;QAEvC,gBAAgB,iBAAiB;IAGrC,EAAE,OAAM;QACJ,QAAQ,GAAG,CAAC;IAChB;AACJ;AAGA,qCAAqC;AACrC,kBAAkB,SAAS,GAAG;AAG9B,oEAAoE;AAEpE,SAAS,gBAAgB,eAAe,EAAE,MAAM;IAC5C,QAAQ,GAAG,CAAC,QAAQ,oFAAoF;;IAExG,qCAAqC;IACrC,IAAI,eAAe,SAAS,aAAa,CAAC;IAC1C,aAAa,WAAW,GAAG,gBAAgB,KAAK;IAEhD,IAAI,gBAAgB,SAAS,aAAa,CAAC;IAC3C,cAAc,WAAW,GAAG,oBAAiB,gBAAgB,OAAO,CAAC,EAAE,CAAC,IAAI;IAE5E,IAAI,qBAAqB,SAAS,aAAa,CAAC;IAChD,mBAAmB,WAAW,GAAG,kBAAkB,gBAAgB,WAAW;IAE9E,IAAI,gBAAgB,SAAS,aAAa,CAAC;IAC3C,cAAc,WAAW,GAAG,iCAA8B,SAAS;IAEnE,uCAAuC;IAEvC,kBAAkB,WAAW,CAAC;IAC9B,kBAAkB,WAAW,CAAC;IAC9B,kBAAkB,WAAW,CAAC;IAC9B,kBAAkB,WAAW,CAAC;IAE9B,mCAAmC;IACnC,IAAI,YAAY,SAAS,aAAa,CAAC;IACvC,kBAAkB,WAAW,CAAC;AAElC","sources":["src/js/main.js"],"sourcesContent":[" \"use strict\"; \r\n\r\nlet searchBtnEl = document.getElementById(\"searchBtn\"); \r\n\r\nlet bookInfoContainer = document.getElementById(\"bookInfoContainer\");\r\n\r\nsearchBtnEl.addEventListener('click', getValue);\r\n\r\n//Tar värdet från searchbar och sätter in det i URL för API:n \r\nfunction getValue() { \r\n    bookInfoContainer.innerHTML = \"\"; //resnar gamla sökningen om det finns en\r\n\r\n    let searchbarValue = document.getElementById(\"searchBar\").value; \r\n\r\n    let bookURL = `https://api.bigbookapi.com/search-books?api-key=e6f1f17954b54f6bbc6cb857bc9bfb82&query=${searchbarValue}&number=2`;\r\n\r\n    getBookID(bookURL)\r\n}\r\n\r\n//Hämtar API:n med sökvärdet i och får fram ID på boken för att kunna få mer info\r\nasync function getBookID(bookURL) {\r\n    try {\r\n        let response = await fetch(bookURL); \r\n\r\n        let bookInfo = await response.json(); \r\n\r\n        let bookArray = bookInfo.books; \r\n\r\n        bookArray.forEach(book => {\r\n            let bookId = book[0].id;  \r\n\r\n            getBookInfo(bookId);\r\n        }); \r\n \r\n    } catch {\r\n        console.log(\"Något gick fel...\")\r\n    }\r\n};  \r\n\r\n//Hämtar mer info om boken utifrån bokID från förra API:t\r\nasync function getBookInfo(bookId) {\r\n    let InfoURL = `https://api.bigbookapi.com/${bookId}?api-key=e6f1f17954b54f6bbc6cb857bc9bfb82`;\r\n\r\n    try {\r\n        let response = await fetch(InfoURL); \r\n\r\n        let bookDescription = await response.json();\r\n        \r\n        let OLID = bookDescription.identifiers.open_library_id; \r\n\r\n        let response2 = await fetch(`https://openlibrary.org/works/${OLID}/ratings.json`) \r\n\r\n        let bookRating = await response2.json(); \r\n\r\n        let avgRat = bookRating.summary.average; \r\n\r\n        displayBookInfo(bookDescription, avgRat);\r\n          \r\n\r\n    } catch {\r\n        console.log(\"Något gick snett\")\r\n    }\r\n}; \r\n\r\n\r\n// Rensa innehållet en gång vid start\r\nbookInfoContainer.innerHTML = \"\";\r\n\r\n\r\n//Här kommer funktioner för att skriva ut själva innehålet till DOM \r\n \r\nfunction displayBookInfo(bookDescription, avgRat) {\r\n    console.log(avgRat) // glr att den fastnar i catch. Kanske inte kan skicka in två värden i en funktion  \r\n    \r\n    // Skapa element för att visa bokinfo\r\n    let titleElement = document.createElement(\"h2\");\r\n    titleElement.textContent = bookDescription.title;\r\n\r\n    let authorElement = document.createElement(\"p\");\r\n    authorElement.textContent = \"Författare: \" + bookDescription.authors[0].name;\r\n\r\n    let descriptionElement = document.createElement(\"p\");\r\n    descriptionElement.textContent = \"Beskrivning: \" + bookDescription.description; \r\n\r\n    let ratingElement = document.createElement(\"p\"); \r\n    ratingElement.textContent = \"Betyg från Open Library: \" + avgRat + \"/5\"; \r\n\r\n    // Lägg till de skapade elementen i DOM\r\n    \r\n    bookInfoContainer.appendChild(titleElement);\r\n    bookInfoContainer.appendChild(authorElement);\r\n    bookInfoContainer.appendChild(descriptionElement);\r\n    bookInfoContainer.appendChild(ratingElement); \r\n\r\n    // Skapa en linje mellan varje bok \r\n    let lineBreak = document.createElement(\"hr\");\r\n    bookInfoContainer.appendChild(lineBreak);\r\n    \r\n}"],"names":[],"version":3,"file":"index.aa69868b.js.map","sourceRoot":"/__parcel_source_root/"}