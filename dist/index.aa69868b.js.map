{"mappings":"AAAC;AAED,IAAI,cAAc,SAAS,cAAc,CAAC;AAE1C,YAAY,gBAAgB,CAAC,SAAS;AAEtC,8DAA8D;AAC9D,SAAS;IACL,IAAI,iBAAiB,SAAS,cAAc,CAAC,aAAa,KAAK;IAE/D,IAAI,UAAU,CAAC,iFAAiF,EAAE,eAAe,SAAS,CAAC;IAE3H,UAAU;AACd;AAEA,iFAAiF;AACjF,eAAe,UAAU,OAAO;IAC5B,IAAI;QACA,IAAI,WAAW,MAAM,MAAM;QAE3B,IAAI,WAAW,MAAM,SAAS,IAAI;QAElC,IAAI,YAAY,SAAS,KAAK;QAE9B,UAAU,OAAO,CAAC,CAAA;YACd,IAAI,SAAS,IAAI,CAAC,EAAE,CAAC,EAAE;YAEvB,YAAY;QAChB;IAEJ,EAAE,OAAM;QACJ,QAAQ,GAAG,CAAC;IAChB;AACJ;AAEA,yDAAyD;AACzD,eAAe,YAAY,MAAM;IAC7B,IAAI,UAAU,CAAC,2BAA2B,EAAE,OAAO,yCAAyC,CAAC;IAE7F,IAAI;QACA,IAAI,WAAW,MAAM,MAAM;QAE3B,IAAI,kBAAkB,MAAM,SAAS,IAAI;QAEzC,IAAI,OAAO,gBAAgB,WAAW,CAAC,eAAe;QAEtD,sBAAsB;QAEtB,cAAc;IAElB,EAAE,OAAM;QACJ,QAAQ,GAAG,CAAC;IAChB;AACJ;AAGA,yDAAyD;AACzD,eAAe,cAAc,IAAI;IAC7B,IAAI,YAAY,CAAC,8BAA8B,EAAE,KAAK,aAAa,CAAC;IAEpE,IAAI;QACA,IAAI,WAAW,MAAM,MAAM;QAE3B,IAAI,aAAa,MAAM,SAAS,IAAI;QAEpC,SAAS,WAAW,OAAO,CAAC,OAAO;QAEnC,QAAQ,KAAK,CAAC;IAClB,EAAE,OAAM;QAEJ,QAAQ,GAAG,CAAC;IAChB;AACJ,EAIA,oEAAoE;CACpE;;;;;;;;;;CAUC","sources":["src/js/main.js"],"sourcesContent":[" \"use strict\"; \r\n\r\nlet searchBtnEl = document.getElementById(\"searchBtn\"); \r\n\r\nsearchBtnEl.addEventListener('click', getValue);\r\n\r\n//Tar värdet från searchbar och sätter in det i URL för API:n \r\nfunction getValue() {\r\n    let searchbarValue = document.getElementById(\"searchBar\").value; \r\n\r\n    let bookURL = `https://api.bigbookapi.com/search-books?api-key=e19903aa65dd4697a3ab9d82d6465d3c=${searchbarValue}&number=5`;\r\n\r\n    getBookID(bookURL)\r\n}\r\n\r\n//Hämtar API:n med sökvärdet i och får fram ID på boken för att kunna få mer info\r\nasync function getBookID(bookURL) {\r\n    try {\r\n        let response = await fetch(bookURL); \r\n\r\n        let bookInfo = await response.json(); \r\n\r\n        let bookArray = bookInfo.books; \r\n\r\n        bookArray.forEach(book => {\r\n            let bookId = book[0].id;  \r\n\r\n            getBookInfo(bookId);\r\n        }); \r\n \r\n    } catch {\r\n        console.log(\"Något gick fel...\")\r\n    }\r\n};  \r\n\r\n//Hämtar mer info om boken utifrån bokID från förra API:t\r\nasync function getBookInfo(bookId) {\r\n    let InfoURL = `https://api.bigbookapi.com/${bookId}?api-key=e19903aa65dd4697a3ab9d82d6465d3c`;\r\n\r\n    try {\r\n        let response = await fetch(InfoURL); \r\n\r\n        let bookDescription = await response.json(); \r\n\r\n        let OLID = bookDescription.identifiers.open_library_id; \r\n\r\n        //console.table(OLID);\r\n\r\n        getBookRating(OLID); \r\n\r\n    } catch {\r\n        console.log(\"Något gick snett\")\r\n    }\r\n}; \r\n\r\n\r\n//hämtar recension från New York Times (OM DET FINNS EN!)\r\nasync function getBookRating(OLID) {\r\n    let reviewURL = `https://openlibrary.org/works/${OLID}/ratings.json`; \r\n\r\n    try {\r\n        let response = await fetch(reviewURL); \r\n\r\n        let bookRating = await response.json();  \r\n\r\n        avgRat = bookRating.average.summary; \r\n\r\n        console.table(avgRat);\r\n    } catch {\r\n        \r\n        console.log(\"Något gick galet!\")\r\n    }\r\n}\r\n\r\n\r\n\r\n//Här kommer funktioner för att skriva ut själva innehålet till DOM \r\n/*\r\nfunction displayBookInfo(bookDescription) {\r\n    bookInfo.forEach(book => {\r\n        \r\n        document.getElementById(\"bookList\").innerHTML = `\r\n        <li>${book.title}</li>\r\n        <li>${book.image}</li>\r\n        <li>${book.id}</li> \r\n        ` \r\n    });\r\n}*/\r\n"],"names":[],"version":3,"file":"index.aa69868b.js.map","sourceRoot":"/__parcel_source_root/"}